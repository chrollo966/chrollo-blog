---
title: "Gatsbyã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«å‹ä»˜ã‘ã—ãŸ"
date: "2023-01-04"
slug: "gatsby-tutorial-typescript"
hero_image: "./dog-one.jpeg"
hero_image_alt: "A dog"
hero_image_credit_text: "Pauline Loroy"
hero_image_credit_link: "https://unsplash.com/photos/U3aF7hgUSrk"
private: true
---

# Gatsby + TypeScript ã§èº“ã„ãŸç®‡æ‰€ã®å¯¾å¿œ

Gatsby ã® Tutorial: [Learn how Gatsby works](https://www.gatsbyjs.com/docs/tutorial/) ã‚’å‚è€ƒã«ã—ã¦ãƒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ãŸï¼åŒæ™‚ã«ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ TypeScript ã«ç½®ãæ›ãˆãªãŒã‚‰èª­ã¿æ›¸ãã—ã¦ã„ãŸã®ã ãŒï¼Œå°‘ã€…èº“ãã¨ã“ã‚ãŒã‚ã£ãŸã®ã§è‡ªåˆ†ç”¨ã«ã¾ã¨ã‚ã‚‹ï¼

## Part 0: Set Up Your Development Environment

ã“ã“ã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒã‚„ã•ã—ãå›°ã‚‰ãªã‹ã£ãŸ

## Part 1: Create and Deploy Your First Gatsby Site

ã“ã“ã§ `npm init gatsby` ã¨ã—ã¦ Gatsby ã‚µã‚¤ãƒˆã‚’ã¤ãã‚‹æº–å‚™ã‚’ã™ã‚‹ï¼

é€”ä¸­ã§

```
Will you be using JavaScript or TypeScript?
â¯ JavaScript
  TypeScript
```

ã¨ã„ã†é¸æŠè‚¢ãŒã‚ã‚‹ã®ã§ï¼Œã“ã‚Œã¯ TypeScript ã‚’é¸ã‚“ã§ãŠã“ã†ï¼

## Part 2: Use and Style React Components

ã“ã®ã‚ãŸã‚Šã‹ã‚‰ React + TypeScript ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã§å‹ã‚’ã¤ã‘ã‚‹ï¼

### Task: Update the home page content

ã“ã“ã§ `src/pages/index.js` ã«æ›¸ãã‚³ãƒ¼ãƒ‰ä¾‹ãŒã‚ã‚‹ã®ã ãŒï¼Œã“ã‚Œã¯æ‹¡å¼µå­ã‚’ `src/pages/index.tsx` ã¨å¤‰ãˆã‚‹ï¼

ãã—ã¦ï¼Œå®šç¾©ã•ã‚Œã¦ã„ã‚‹ `IndexPage` ã¨ `Head` ã¨ã„ã†ã‚¢ãƒ­ãƒ¼é–¢æ•°ã«å‹ã‚’ã‚’ã¤ã‘ã‚ˆã†ï¼

```TSX
import * as React from 'react'
import type { PageProps, HeadFC } from 'gatsby' // (1)

const IndexPage: React.FC<PageProps> = () => { // (2)
    /* snip */
}

export const Head: HeadFC = () => <title>HomePage</title> // (3)

/* snip */
```

1. `import type { PageProps, HeadFC } from 'gatsby` ã§å¿…è¦ãªå‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
2. `const IndexPage: React.FC<PageProps>` ã§ï¼Œ `IndexPage` ã®å‹ã‚’æ›¸ãï¼ˆä»–ã®è‰¯ã„æ›¸ãæ–¹ã‚‚ã‚ã‚‹ã½ã„ï¼‰
3. `export const Head: HeadFC` ã§ï¼Œ `Head` ã«ã‚‚ `HeadFC` ã¨ã„ã†å‹ã‚’ã¤ã‘ã‚‹

é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¼•æ•°ã‚’ `prop` ã¨ã„ã†ï¼ `PageProps` ã¯ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã‘ã‚‹å‹ï¼ `HeadFC` ã¯ `Head` é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã‘ã‚‹å‹ï¼ã„ãšã‚Œã‚‚ Gatsby ãŒç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ï¼ `React.FC` ã¯é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã‘ã‚‹å‹ï¼ `<PageProps>` ã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨ã„ã†æ©Ÿèƒ½ã§ï¼Œã¨ã‚Šã‚ãˆãšã¯ `IndexPage` ã®å¼•æ•°ã®å‹ã ã¨æ€ãˆã°ã‚ˆã•ãã†ï¼

### Task: Create a new page component for an About page

ã“ã“ã® `AboutPage` ã‚„ `Head` ã‚‚åŒã˜ã `AboutPage: React.FC<PageProps>`, `Head: HeadFC` ã¨å‹ã‚’ã¤ã‘ã‚‹ï¼

### Create a reusable layout component

`Layout` ã®å¼•æ•°ã« `{ pageTitle, children }` ãŒå‡ºã¦ããŸã®ã§ã“ã‚Œã«å‹ã‚’ã¤ã‘ã‚‹ï¼

* `pageTitle` ã¯æ–‡å­—é€šã‚Šãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã§æ–‡å­—åˆ—ãªã®ã§ `string` å‹ã«ã™ã‚‹
* `children` ã®å‹ã¯ `React.ReactNode`ï¼
* ãŸã ã—ï¼Œå¼•æ•°ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ï¼Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å‹ã‚’ä»˜ã‘ã‚‹ãŸã‚ã« `type` ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ã„å‹ã‚’å®šç¾©ã™ã‚‹

```TSX
/* snip */

type LayoutProps = {
    pageTitle: string,
    children: React.ReactNode,
}

const Layout = ({ pageTitle, children }: LayoutProps) => {
    /* snip */
}

/* snip */
```

### Style components with CSS Module

Gatsby ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ CSS Modules ã‚’ä½¿ã£ãŸã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ãŒï¼ŒCSS Modules ã®å‹ã®å–ã‚Šæ‰±ã„ãŒã‚ˆãã‚ã‹ã‚‰ãªã„ï¼ˆCSS Modules `layout.modules.css` ã®å‹ã‚’å®šç¾©ã—ãŸ`layout.modules.css.d.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ãŸä¸Šã§ `import { container } from './layout.modules.css'` ã—ã¦ã‚‚ï¼Œã€Œ`container` ãŒ `layout.modules.css` ã‹ã‚‰ export ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã¨ã„ã†å†…å®¹ã®ã‚€ã‹ã¤ãã‚¨ãƒ©ãƒ¼ãŒåã‹ã‚Œã‚‹ï¼YackğŸ¤¢ï¼‰ï¼ãã®ä¸Šï¼Œä½•ã‚„ã‚‰ CSS Modules ãŒå°†æ¥ deprecatedï¼ˆå»ƒæ­¢ï¼‰ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã ã®ä¸ç©ãªè¨˜äº‹ã‚‚ã‚ã‚‹ã®ã§ï¼Œã“ã“ã§ã¯ Gatsby TypeScript å…¬å¼ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ï¼ˆcf. [TypeScript and Gatsby](https://www.gatsbyjs.com/docs/how-to/custom-configuration/typescript/)ï¼‰ **Vanilla Extract** ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ãŸï¼å…¬å¼ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã—ãªãŒã‚‰ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã® `src/components/layout.module.css` ã‚’ `src/components/layout.css.ts` ã¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’é©å®œæ›¸ãæ›ãˆã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ãŸï¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãªã©ã«æ³¨æ„ã—ã‚ˆã†ï¼š

```TypeScript
import { style } from '@vanilla-extract/css';

export const container = style({
    margin: 'auto',
    maxWidth: '500px',
    fontFamily: 'sans-serif'
});
  
export const heading = style({
    color: 'rebeccapurple'
});

export const navLinks = style({
    display: "flex",
    listStyle: "none",
    paddingLeft: 0
});

export const navLinkItem = style({
    paddingRight: '2rem'
});

export const navLinkText = style({
    color: 'black'
});

export const siteTitle = style({
    fontSize: '3rem',
    color: 'gray',
    fontWeight: 700,
    margin: '3rem 0',
})
```

ã“ã‚Œã§ã¡ã‚ƒã‚“ã¨ export ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ãƒãƒ³ã‚¶ã‚¤ï¼å‹ã®ã‚¨ãƒ©ãƒ¼ã‚‚ãªã—ï¼

## Part 3: Add Features with Plugins

ç‰¹ã«ãªã—ï¼

## Part 4: Query for Data with GraphQL

### Task: Use a page query to pull the list of post filenames into your blog page

`gatsby-config.ts` ã®ä¸­ã® `graphqlTypegen` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ `true` ã«ã™ã‚‹ã¨ï¼ŒGraphQL ã§å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã«ã‚‚å‹ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼ã¤ã¾ã‚Šï¼Œ

```TypeScript gatsby-config.ts
/* snip */

const config: GatsbyConfig = {
    /* snip */
  
    graphqlTypegen: true,

/* snip */
```

ã¨è¨­å®šã—ã¦ï¼Œ

```TypeScript /src/pages/blog.tsx
export const query = graphql`
    query BlogPage{
        allFile {
            nodes {
                name
            }
        }
    }
`
```

ã¨**ã‚¯ã‚¨ãƒªåã‚’ã¤ã‘ã¦**ã‚¯ã‚¨ãƒªã‚’æ›¸ãã¨ï¼Œ `gatsby-types.d.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ«å°¾ã«å‹ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼š

```TypeScript
type BlogPageQuery = { readonly allFile: /* ...snip... */
```

`query BlogPage` ã¨åå‰ã‚’ã¤ã‘ã‚‹ã¨ï¼Œ `BlogPageQuery` ã¨ã„ã†å‹ãŒç”Ÿæˆã•ã‚Œã‚‹ï¼

`BlogPage` ã®å¼•æ•°ã®ãƒ‡ãƒ¼ã‚¿ã« `PageProps<Queries.BlogPageQuery>` ã¨ã„ã†å‹ã‚’ã¤ã‘ã‚ˆã†ï¼

```TypeScript
const BlogPage = ({ data }: PageProps<Queries.BlogPageQuery>) => {
    return ( /* snip */
```

## Part 5. Transform Data to Use MDX